<Window x:Class="OpenSoul.Windows.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="OpenSoul Settings"
        Width="680"
        Height="540"
        MinWidth="560"
        MinHeight="440"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="False"
        ResizeMode="CanResize"
        Background="{DynamicResource ShellBgBrush}"
        ShowInTaskbar="False">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="36"
                      ResizeBorderThickness="6"
                      GlassFrameThickness="0"
                      CornerRadius="8"
                      UseAeroCaptionButtons="False" />
    </WindowChrome.WindowChrome>

    <Window.Resources>
        <!-- Nav item style -->
        <Style x:Key="NavItem" TargetType="RadioButton">
            <Setter Property="Foreground" Value="{DynamicResource MutedBrush}" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="FontFamily" Value="Segoe UI Variable Text, Segoe UI" />
            <Setter Property="Height" Value="36" />
            <Setter Property="Padding" Value="16,0" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="GroupName" Value="SettingsNav" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="Bg"
                                Background="Transparent"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}"
                                Margin="4,1">
                            <ContentPresenter VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bg" Property="Background"
                                        Value="{DynamicResource PanelStrongBrush}" />
                            </Trigger>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Bg" Property="Background"
                                        Value="{DynamicResource PanelStrongBrush}" />
                                <Setter Property="Foreground"
                                        Value="{DynamicResource TextBrush}" />
                                <Setter Property="FontWeight" Value="SemiBold" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Section header -->
        <Style x:Key="SectionHeader" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Foreground" Value="{DynamicResource MutedBrush}" />
            <Setter Property="Margin" Value="0,0,0,8" />
            <Setter Property="FontFamily" Value="Segoe UI Variable Small, Segoe UI" />
        </Style>

        <!-- Form label -->
        <Style x:Key="FormLabel" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
            <Setter Property="FontFamily" Value="Segoe UI Variable Text, Segoe UI" />
            <Setter Property="Margin" Value="0,0,0,4" />
        </Style>

        <!-- Form description -->
        <Style x:Key="FormDesc" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12" />
            <Setter Property="Foreground" Value="{DynamicResource MutedBrush}" />
            <Setter Property="FontFamily" Value="Segoe UI Variable Small, Segoe UI" />
            <Setter Property="TextWrapping" Value="Wrap" />
            <Setter Property="Margin" Value="0,2,0,12" />
        </Style>

        <!-- Text input style -->
        <Style x:Key="SettingsInput" TargetType="TextBox">
            <Setter Property="Height" Value="34" />
            <Setter Property="Padding" Value="10,6" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="FontFamily" Value="Segoe UI Variable Text, Segoe UI" />
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
            <Setter Property="Background" Value="{DynamicResource PanelBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CaretBrush" Value="{DynamicResource TextBrush}" />
            <Setter Property="Margin" Value="0,0,0,4" />
        </Style>

        <!-- Toggle switch style (using CheckBox) -->
        <Style x:Key="ToggleSwitch" TargetType="CheckBox">
            <Setter Property="FontSize" Value="13" />
            <Setter Property="FontFamily" Value="Segoe UI Variable Text, Segoe UI" />
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
            <Setter Property="Margin" Value="0,0,0,4" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>

        <!-- ComboBox style -->
        <Style x:Key="SettingsCombo" TargetType="ComboBox">
            <Setter Property="Height" Value="34" />
            <Setter Property="Padding" Value="10,6" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="FontFamily" Value="Segoe UI Variable Text, Segoe UI" />
            <Setter Property="Background" Value="{DynamicResource PanelBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Margin" Value="0,0,0,4" />
        </Style>

        <!-- Save button -->
        <Style x:Key="SaveButton" TargetType="Button">
            <Setter Property="Height" Value="36" />
            <Setter Property="Padding" Value="20,0" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="FontFamily" Value="Segoe UI Variable Text, Segoe UI" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Bg"
                                Background="{DynamicResource AccentBrush}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bg" Property="Background"
                                        Value="{DynamicResource AccentHoverBrush}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <!-- Titlebar -->
            <RowDefinition Height="36" />
            <!-- Content -->
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- ═══════ Titlebar ═══════ -->
        <Grid Grid.Row="0" Background="{DynamicResource TitlebarBrush}">
            <TextBlock Text="⚙ Settings"
                       FontSize="13"
                       FontWeight="SemiBold"
                       FontFamily="Segoe UI Variable Text, Segoe UI"
                       Foreground="{DynamicResource TextBrush}"
                       VerticalAlignment="Center"
                       Margin="16,0,0,0" />
            <Button HorizontalAlignment="Right"
                    Width="46" Height="36"
                    Background="Transparent"
                    BorderThickness="0"
                    WindowChrome.IsHitTestVisibleInChrome="True"
                    Click="CloseButton_Click"
                    Cursor="Arrow">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Bg" Background="Transparent">
                            <TextBlock Text="✕"
                                       FontSize="12"
                                       Foreground="{DynamicResource MutedBrush}"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bg" Property="Background"
                                        Value="{DynamicResource CloseButtonHoverBrush}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
            <Border Height="1" VerticalAlignment="Bottom"
                    Background="{DynamicResource BorderBrush}" />
        </Grid>

        <!-- ═══════ Settings body ═══════ -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <!-- Nav -->
                <ColumnDefinition Width="160" />
                <!-- Divider -->
                <ColumnDefinition Width="1" />
                <!-- Content -->
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Navigation -->
            <StackPanel Grid.Column="0" Margin="4,12,0,12">
                <RadioButton x:Name="NavGeneral"
                             Content="General"
                             Style="{StaticResource NavItem}"
                             IsChecked="True"
                             Checked="NavGeneral_Checked" />
                <RadioButton x:Name="NavConnection"
                             Content="Connection"
                             Style="{StaticResource NavItem}"
                             Checked="NavConnection_Checked" />
                <RadioButton x:Name="NavAppearance"
                             Content="Appearance"
                             Style="{StaticResource NavItem}"
                             Checked="NavAppearance_Checked" />
                <RadioButton x:Name="NavShortcuts"
                             Content="Shortcuts"
                             Style="{StaticResource NavItem}"
                             Checked="NavShortcuts_Checked" />
                <RadioButton x:Name="NavPrivacy"
                             Content="Privacy"
                             Style="{StaticResource NavItem}"
                             Checked="NavPrivacy_Checked" />
                <RadioButton x:Name="NavAdvanced"
                             Content="Advanced"
                             Style="{StaticResource NavItem}"
                             Checked="NavAdvanced_Checked" />
                <RadioButton x:Name="NavAbout"
                             Content="About"
                             Style="{StaticResource NavItem}"
                             Checked="NavAbout_Checked" />
            </StackPanel>

            <!-- Vertical divider -->
            <Border Grid.Column="1" Background="{DynamicResource BorderBrush}" />

            <!-- Content panels -->
            <ScrollViewer Grid.Column="2"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled">
                <Grid>

                <!-- ─── General ─── -->
                <StackPanel x:Name="PanelGeneral" Margin="24,20">
                    <TextBlock Text="GENERAL" Style="{StaticResource SectionHeader}" />

                    <CheckBox x:Name="AutoStartCheck"
                              Content="Start OpenSoul at Windows login"
                              Style="{StaticResource ToggleSwitch}" />
                    <TextBlock Text="Automatically launch OpenSoul when you sign in to Windows."
                               Style="{StaticResource FormDesc}" />

                    <CheckBox x:Name="CloseToTrayCheck"
                              Content="Minimize to tray on close"
                              Style="{StaticResource ToggleSwitch}" />
                    <TextBlock Text="When you close the window, keep OpenSoul running in the system tray."
                               Style="{StaticResource FormDesc}" />

                    <CheckBox x:Name="ShowInTaskbarCheck"
                              Content="Show in taskbar"
                              Style="{StaticResource ToggleSwitch}" />
                    <TextBlock Text="Display OpenSoul in the Windows taskbar alongside the tray icon."
                               Style="{StaticResource FormDesc}" />

                    <TextBlock Text="Default session key" Style="{StaticResource FormLabel}" />
                    <TextBox x:Name="SessionKeyInput"
                             Style="{StaticResource SettingsInput}" />
                    <TextBlock Text="The session key used by default for chat conversations."
                               Style="{StaticResource FormDesc}" />

                    <TextBlock Text="History limit" Style="{StaticResource FormLabel}" />
                    <TextBox x:Name="HistoryLimitInput"
                             Style="{StaticResource SettingsInput}"
                             Width="120"
                             HorizontalAlignment="Left" />
                    <TextBlock Text="Maximum number of chat messages to load from history (1-1000)."
                               Style="{StaticResource FormDesc}" />

                    <Button Content="Save"
                            Style="{StaticResource SaveButton}"
                            HorizontalAlignment="Left"
                            Click="SaveButton_Click"
                            Margin="0,8,0,0" />
                </StackPanel>

                <!-- ─── Connection ─── -->
                <StackPanel x:Name="PanelConnection" Visibility="Collapsed" Margin="24,20">
                    <TextBlock Text="CONNECTION" Style="{StaticResource SectionHeader}" />

                    <TextBlock Text="Connection mode" Style="{StaticResource FormLabel}" />
                    <ComboBox x:Name="ModeCombo" Style="{StaticResource SettingsCombo}"
                              Width="200" HorizontalAlignment="Left">
                        <ComboBoxItem Tag="Local" Content="Local" />
                        <ComboBoxItem Tag="Remote" Content="Remote" />
                    </ComboBox>
                    <TextBlock Text="Local mode manages a gateway process automatically. Remote mode connects to an external gateway."
                               Style="{StaticResource FormDesc}" />

                    <CheckBox x:Name="AutoConnectCheck"
                              Content="Auto-connect on launch"
                              Style="{StaticResource ToggleSwitch}" />
                    <TextBlock Text="Automatically connect to the gateway when the app starts."
                               Style="{StaticResource FormDesc}" />

                    <TextBlock Text="Remote URL" Style="{StaticResource FormLabel}" />
                    <TextBox x:Name="RemoteUrlInput"
                             Style="{StaticResource SettingsInput}" />
                    <TextBlock Text="WebSocket URL for remote gateway (ws:// or wss://)."
                               Style="{StaticResource FormDesc}" />

                    <Button Content="Save"
                            Style="{StaticResource SaveButton}"
                            HorizontalAlignment="Left"
                            Click="SaveButton_Click"
                            Margin="0,8,0,0" />
                </StackPanel>

                <!-- ─── Appearance ─── -->
                <StackPanel x:Name="PanelAppearance" Visibility="Collapsed" Margin="24,20">
                    <TextBlock Text="APPEARANCE" Style="{StaticResource SectionHeader}" />

                    <TextBlock Text="Theme" Style="{StaticResource FormLabel}" />
                    <ComboBox x:Name="ThemeCombo" Style="{StaticResource SettingsCombo}"
                              Width="200" HorizontalAlignment="Left">
                        <ComboBoxItem Tag="system" Content="System" />
                        <ComboBoxItem Tag="light" Content="Light" />
                        <ComboBoxItem Tag="dark" Content="Dark" />
                    </ComboBox>
                    <TextBlock Text="Choose your preferred color theme. System follows your Windows settings."
                               Style="{StaticResource FormDesc}" />

                    <Button Content="Save"
                            Style="{StaticResource SaveButton}"
                            HorizontalAlignment="Left"
                            Click="SaveButton_Click"
                            Margin="0,8,0,0" />
                </StackPanel>

                <!-- ─── Shortcuts ─── -->
                <StackPanel x:Name="PanelShortcuts" Visibility="Collapsed" Margin="24,20">
                    <TextBlock Text="KEYBOARD SHORTCUTS" Style="{StaticResource SectionHeader}" />

                    <TextBlock Text="Global shortcuts work even when OpenSoul is in the background."
                               Style="{StaticResource FormDesc}" Margin="0,0,0,16" />

                    <!-- Shortcuts table header -->
                    <Grid Margin="0,0,0,4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="140" />
                            <ColumnDefinition Width="80" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Action"
                                   FontSize="11" FontWeight="SemiBold"
                                   Foreground="{DynamicResource MutedBrush}" />
                        <TextBlock Grid.Column="1" Text="Shortcut"
                                   FontSize="11" FontWeight="SemiBold"
                                   Foreground="{DynamicResource MutedBrush}" />
                        <TextBlock Grid.Column="2" Text="Scope"
                                   FontSize="11" FontWeight="SemiBold"
                                   Foreground="{DynamicResource MutedBrush}" />
                    </Grid>
                    <Border Height="1" Background="{DynamicResource BorderBrush}" Margin="0,0,0,4" />

                    <!-- Shortcut rows -->
                    <Grid Margin="0,6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="140" />
                            <ColumnDefinition Width="80" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Toggle main window"
                                   FontSize="13" Foreground="{DynamicResource TextBrush}" />
                        <Border Grid.Column="1" HorizontalAlignment="Left"
                                Background="{DynamicResource PanelStrongBrush}"
                                CornerRadius="4" Padding="8,3">
                            <TextBlock Text="Ctrl+Shift+O" FontSize="12"
                                       FontFamily="Cascadia Mono, Consolas"
                                       Foreground="{DynamicResource MutedStrongBrush}" />
                        </Border>
                        <TextBlock Grid.Column="2" Text="Global"
                                   FontSize="12" Foreground="{DynamicResource SuccessBrush}" />
                    </Grid>

                    <Grid Margin="0,6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="140" />
                            <ColumnDefinition Width="80" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Open chat"
                                   FontSize="13" Foreground="{DynamicResource TextBrush}" />
                        <Border Grid.Column="1" HorizontalAlignment="Left"
                                Background="{DynamicResource PanelStrongBrush}"
                                CornerRadius="4" Padding="8,3">
                            <TextBlock Text="Ctrl+Shift+C" FontSize="12"
                                       FontFamily="Cascadia Mono, Consolas"
                                       Foreground="{DynamicResource MutedStrongBrush}" />
                        </Border>
                        <TextBlock Grid.Column="2" Text="Global"
                                   FontSize="12" Foreground="{DynamicResource SuccessBrush}" />
                    </Grid>

                    <Border Height="1" Background="{DynamicResource BorderBrush}" Margin="0,4" />

                    <Grid Margin="0,6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="140" />
                            <ColumnDefinition Width="80" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Open dashboard"
                                   FontSize="13" Foreground="{DynamicResource TextBrush}" />
                        <Border Grid.Column="1" HorizontalAlignment="Left"
                                Background="{DynamicResource PanelStrongBrush}"
                                CornerRadius="4" Padding="8,3">
                            <TextBlock Text="Ctrl+D" FontSize="12"
                                       FontFamily="Cascadia Mono, Consolas"
                                       Foreground="{DynamicResource MutedStrongBrush}" />
                        </Border>
                        <TextBlock Grid.Column="2" Text="Window"
                                   FontSize="12" Foreground="{DynamicResource MutedBrush}" />
                    </Grid>

                    <Grid Margin="0,6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="140" />
                            <ColumnDefinition Width="80" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Command palette"
                                   FontSize="13" Foreground="{DynamicResource TextBrush}" />
                        <Border Grid.Column="1" HorizontalAlignment="Left"
                                Background="{DynamicResource PanelStrongBrush}"
                                CornerRadius="4" Padding="8,3">
                            <TextBlock Text="Ctrl+K" FontSize="12"
                                       FontFamily="Cascadia Mono, Consolas"
                                       Foreground="{DynamicResource MutedStrongBrush}" />
                        </Border>
                        <TextBlock Grid.Column="2" Text="Window"
                                   FontSize="12" Foreground="{DynamicResource MutedBrush}" />
                    </Grid>

                    <Grid Margin="0,6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="140" />
                            <ColumnDefinition Width="80" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Switch tabs (1-4)"
                                   FontSize="13" Foreground="{DynamicResource TextBrush}" />
                        <Border Grid.Column="1" HorizontalAlignment="Left"
                                Background="{DynamicResource PanelStrongBrush}"
                                CornerRadius="4" Padding="8,3">
                            <TextBlock Text="Ctrl+1..4" FontSize="12"
                                       FontFamily="Cascadia Mono, Consolas"
                                       Foreground="{DynamicResource MutedStrongBrush}" />
                        </Border>
                        <TextBlock Grid.Column="2" Text="Window"
                                   FontSize="12" Foreground="{DynamicResource MutedBrush}" />
                    </Grid>

                    <Grid Margin="0,6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="140" />
                            <ColumnDefinition Width="80" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Quick settings"
                                   FontSize="13" Foreground="{DynamicResource TextBrush}" />
                        <Border Grid.Column="1" HorizontalAlignment="Left"
                                Background="{DynamicResource PanelStrongBrush}"
                                CornerRadius="4" Padding="8,3">
                            <TextBlock Text="Ctrl+," FontSize="12"
                                       FontFamily="Cascadia Mono, Consolas"
                                       Foreground="{DynamicResource MutedStrongBrush}" />
                        </Border>
                        <TextBlock Grid.Column="2" Text="Window"
                                   FontSize="12" Foreground="{DynamicResource MutedBrush}" />
                    </Grid>

                    <Grid Margin="0,6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="140" />
                            <ColumnDefinition Width="80" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Quit application"
                                   FontSize="13" Foreground="{DynamicResource TextBrush}" />
                        <Border Grid.Column="1" HorizontalAlignment="Left"
                                Background="{DynamicResource PanelStrongBrush}"
                                CornerRadius="4" Padding="8,3">
                            <TextBlock Text="Ctrl+Q" FontSize="12"
                                       FontFamily="Cascadia Mono, Consolas"
                                       Foreground="{DynamicResource MutedStrongBrush}" />
                        </Border>
                        <TextBlock Grid.Column="2" Text="Window"
                                   FontSize="12" Foreground="{DynamicResource MutedBrush}" />
                    </Grid>
                </StackPanel>

                <!-- ─── Privacy ─── -->
                <StackPanel x:Name="PanelPrivacy" Visibility="Collapsed" Margin="24,20">
                    <TextBlock Text="PRIVACY" Style="{StaticResource SectionHeader}" />

                    <CheckBox x:Name="AnalyticsCheck"
                              Content="Send anonymous usage analytics"
                              Style="{StaticResource ToggleSwitch}" />
                    <TextBlock Text="Help improve OpenSoul by sharing anonymous usage statistics. No personal data is collected."
                               Style="{StaticResource FormDesc}" />

                    <TextBlock Text="DATA MANAGEMENT" Style="{StaticResource SectionHeader}"
                               Margin="0,16,0,8" />

                    <Button x:Name="ClearCacheButton"
                            Content="Clear local chat cache"
                            Click="ClearCacheButton_Click"
                            Padding="14,7"
                            FontSize="13"
                            FontFamily="Segoe UI Variable Text, Segoe UI"
                            Foreground="{DynamicResource TextBrush}"
                            Background="{DynamicResource PanelStrongBrush}"
                            BorderThickness="1"
                            BorderBrush="{DynamicResource BorderBrush}"
                            Cursor="Hand"
                            Margin="0,0,0,4">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="Bg"
                                        Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="6" Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Left"
                                                      VerticalAlignment="Center" />
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="Bg" Property="Background"
                                                Value="{DynamicResource ElevatedBrush}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <TextBlock Text="Remove all locally cached chat messages and conversation data."
                               Style="{StaticResource FormDesc}" />

                    <Button x:Name="ClearCredentialsButton"
                            Content="Clear saved credentials"
                            Click="ClearCredentialsButton_Click"
                            Padding="14,7"
                            FontSize="13"
                            FontFamily="Segoe UI Variable Text, Segoe UI"
                            Foreground="{DynamicResource DangerBrush}"
                            Background="{DynamicResource PanelStrongBrush}"
                            BorderThickness="1"
                            BorderBrush="{DynamicResource BorderBrush}"
                            Cursor="Hand"
                            Margin="0,0,0,4">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="Bg"
                                        Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="6" Padding="{TemplateBinding Padding}">
                                    <ContentPresenter HorizontalAlignment="Left"
                                                      VerticalAlignment="Center" />
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="Bg" Property="Background"
                                                Value="{DynamicResource ElevatedBrush}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <TextBlock Text="Remove all saved tokens, API keys, and session credentials."
                               Style="{StaticResource FormDesc}" />

                    <Button Content="Save"
                            Style="{StaticResource SaveButton}"
                            HorizontalAlignment="Left"
                            Click="SaveButton_Click"
                            Margin="0,16,0,0" />
                </StackPanel>

                <!-- ─── Advanced ─── -->
                <StackPanel x:Name="PanelAdvanced" Visibility="Collapsed" Margin="24,20">
                    <TextBlock Text="ADVANCED" Style="{StaticResource SectionHeader}" />

                    <CheckBox x:Name="DebugModeCheck"
                              Content="Enable debug mode"
                              Style="{StaticResource ToggleSwitch}" />
                    <TextBlock Text="Shows debug tab and enables verbose logging."
                               Style="{StaticResource FormDesc}" />

                    <TextBlock Text="Node.js path (override)" Style="{StaticResource FormLabel}" />
                    <TextBox x:Name="NodePathInput"
                             Style="{StaticResource SettingsInput}" />
                    <TextBlock Text="Custom path to Node.js binary. Leave empty to auto-detect."
                               Style="{StaticResource FormDesc}" />

                    <TextBlock Text="Gateway path (override)" Style="{StaticResource FormLabel}" />
                    <TextBox x:Name="GatewayPathInput"
                             Style="{StaticResource SettingsInput}" />
                    <TextBlock Text="Custom path to opensoul.mjs. Leave empty to auto-detect."
                               Style="{StaticResource FormDesc}" />

                    <Button Content="Save"
                            Style="{StaticResource SaveButton}"
                            HorizontalAlignment="Left"
                            Click="SaveButton_Click"
                            Margin="0,8,0,0" />
                </StackPanel>

                <!-- ─── About ─── -->
                <StackPanel x:Name="PanelAbout" Visibility="Collapsed" Margin="24,20">
                    <TextBlock Text="ABOUT" Style="{StaticResource SectionHeader}" />

                    <TextBlock FontSize="18" FontWeight="SemiBold"
                               Foreground="{DynamicResource TextBrush}"
                               FontFamily="Segoe UI Variable Display, Segoe UI"
                               Text="OpenSoul" Margin="0,0,0,4" />
                    <TextBlock x:Name="VersionText"
                               FontSize="13"
                               Foreground="{DynamicResource MutedBrush}"
                               FontFamily="Cascadia Mono, Consolas"
                               Margin="0,0,0,16" />
                    <TextBlock Foreground="{DynamicResource MutedBrush}"
                               FontSize="13"
                               TextWrapping="Wrap">
                        AI agent companion for your digital life.
                        <LineBreak />
                        <LineBreak />
                        © 2024–2026 OpenSoul Contributors
                    </TextBlock>
                </StackPanel>

                </Grid>
            </ScrollViewer>
        </Grid>
    </Grid>
</Window>
